webpackJsonp([10],{"5zde":function(t,a,e){e("zQR9"),e("qyJz"),t.exports=e("FeBl").Array.from},"6InC":function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"orderContainer"}},[e("div",{staticClass:"filter-container"},[e("Form",[e("FormItem",[e("div",{staticClass:"filter-header"},[e("div",{staticClass:"date-filter"},[e("span",{staticStyle:{padding:"10px 12px 10px 0"}},[t._v("创建时间：")]),t._v(" "),e("DatePicker",{attrs:{type:"datetime",placeholder:"选择日期",clearable:"",format:"yyyy-MM-dd HH:mm"},on:{"on-change":function(a){t.listParams.startTime=a}}}),t._v(" "),e("span",[t._v(" 至 ")]),t._v(" "),e("DatePicker",{attrs:{type:"datetime",placeholder:"选择日期",clearable:"",format:"yyyy-MM-dd HH:mm"},on:{"on-change":function(a){t.listParams.endTime=a}}})],1),t._v(" "),e("div",{staticClass:"search-filter"},[e("Input",{staticStyle:{width:"250px"},attrs:{placeholder:"用户ID/订单编号/提案名称"},model:{value:t.listParams.name,callback:function(a){t.$set(t.listParams,"name",a)},expression:"listParams.name"}}),t._v(" "),e("Button",{attrs:{type:"primary"},on:{click:t.filterHandle}},[t._v("查询")])],1)])]),t._v(" "),e("FormItem",{attrs:{label:"收支：","label-width":73,inline:!0}},[e("RadioGroup",{attrs:{type:"button"},on:{"on-change":t.stateChange},model:{value:t.stateRadio,callback:function(a){t.stateRadio=a},expression:"stateRadio"}},[e("Radio",{attrs:{label:"all"}},[t._v("全部")]),t._v(" "),e("Radio",{attrs:{label:"1"}},[t._v("收入")]),t._v(" "),e("Radio",{attrs:{label:"0"}},[t._v("支出")])],1)],1),t._v(" "),e("FormItem",{attrs:{label:"行为：","label-width":73}},[e("RadioGroup",{attrs:{type:"button"},on:{"on-change":t.actionsChange},model:{value:t.actionRadio,callback:function(a){t.actionRadio=a},expression:"actionRadio"}},[e("Radio",{attrs:{label:"all"}},[t._v("全部")]),t._v(" "),t._l(t.actionsList,function(a,i){return[e("Radio",{attrs:{label:a.value}},[t._v(t._s(a.name))])]})],2)],1)],1)],1),t._v(" "),e("Table",{attrs:{border:"",stripe:"",loading:t.loading,columns:t.columns,data:t.orderList.rows}}),t._v(" "),e("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[e("div",{staticStyle:{float:"right"}},[e("Page",{attrs:{current:t.currentPageNum,total:t.orderList.total,"page-size-opts":[10,20,30],"show-elevator":"","show-sizer":""},on:{"update:current":function(a){t.currentPageNum=a},"on-change":function(a){return t.pageChange(a,1)},"on-page-size-change":function(a){return t.pageChange(a,0)}}})],1)]),t._v(" "),e("Modal",{attrs:{title:"订单详情",width:"700"},model:{value:t.infoModal,callback:function(a){t.infoModal=a},expression:"infoModal"}},[e("div",{staticClass:"base-msg-box"},[e("h4",{staticClass:"info-title"},[t._v("基本信息")]),t._v(" "),e("ul",{staticClass:"table-ul"},[e("li",[e("span",{staticClass:"info-label"},[t._v("\n          订单编号：\n        ")]),t._v("\n          "+t._s(t.orderInfo.code)+"\n        ")]),t._v(" "),e("li",[e("span",{staticClass:"info-label"},[t._v("\n          收支：\n        ")]),t._v("\n          "+t._s(t.orderInfo.orderState)+"\n        ")]),t._v(" "),e("li",[e("span",{staticClass:"info-label"},[t._v("\n          时间：\n        ")]),t._v("\n          "+t._s(t.formatCreateTime)+"\n        ")]),t._v(" "),e("li",[e("span",{staticClass:"info-label"},[t._v("\n          行为：\n        ")]),t._v("\n          "+t._s(t.orderInfo.orderType)+"\n        ")]),t._v(" "),e("li",[e("span",{staticClass:"info-label"},[t._v("\n          Tkc：\n        ")]),t._v("\n          "+t._s(t.orderInfo.payTkc)+"\n        ")]),t._v(" "),e("li",[e("span",{staticClass:"info-label"},[t._v("\n          用户：\n        ")]),t._v("\n          "+t._s(t.orderInfo.phone)+"\n        ")])])]),t._v(" "),t.proposalInfo?e("div",{staticClass:"draft-info-box"},[e("h4",{staticClass:"info-title"},[t._v("提案详情")]),t._v(" "),e("ul",{staticClass:"table-ul"},[e("li",[e("span",{staticClass:"info-label"},[t._v("\n          提案名称（ID）：\n        ")]),t._v("\n          "+t._s(t.orderInfo.proposalName)+"\n        ")]),t._v(" "),e("li",[e("span",{staticClass:"info-label"},[t._v("\n          提案结束时间：\n        ")]),t._v("\n          "+t._s(t.proposalInfo.endTime)+"\n        ")]),t._v(" "),e("li",{attrs:{hidden:4==t.orderInfo.type||7==t.orderInfo.type}},[e("span",{staticClass:"info-label"},[t._v("\n          参投票数：\n        ")]),t._v("\n          "+t._s(t.orderInfo.ticket)+"\n        ")]),t._v(" "),e("li",{staticClass:"optionListLi"},[e("p",{staticClass:"info-label"},[t._v("\n            "+t._s(4==t.orderInfo.type||7==t.orderInfo.type?"提案选项：":"参投项：")+"\n          ")]),t._v(" "),e("div",{staticStyle:{flex:"1"}},t._l(t.proposalInfo.list,function(a,i){return e("p",{key:i,staticClass:"ProposalOption"},[t._v(t._s(a))])}))])])]):t._e(),t._v(" "),e("div",{staticStyle:{border:"none"},attrs:{slot:"footer"},slot:"footer"})])],1)},n=[],s={render:i,staticRenderFns:n};a.a=s},Dv2e:function(t,a,e){a=t.exports=e("FZ+f")(!1),a.push([t.i,"#orderContainer[data-v-045c8a54]{padding-bottom:100px}.table-ul[data-v-045c8a54]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-wrap:wrap;flex-wrap:wrap}.table-ul>li[data-v-045c8a54]{width:50%;padding:20px 0}.info-label[data-v-045c8a54]{display:inline-block;width:60px}.info-title[data-v-045c8a54]{padding:5px 0;font-weight:bolder;border-bottom:1px solid #f2f2f2;font-size:13px}.draft-info-box .info-label[data-v-045c8a54]{display:inline-block;width:100px}.other-info>li[data-v-045c8a54]{height:40px;line-height:40px}.optionListLi[data-v-045c8a54]{display:-webkit-box;display:-ms-flexbox;display:flex;line-height:normal}.ProposalOption[data-v-045c8a54]{padding:5px 10px;margin-bottom:10px;border-bottom:1px solid #999}",""])},Gu7T:function(t,a,e){"use strict";a.__esModule=!0;var i=e("c/Tr"),n=function(t){return t&&t.__esModule?t:{default:t}}(i);a.default=function(t){if(Array.isArray(t)){for(var a=0,e=Array(t.length);a<t.length;a++)e[a]=t[a];return e}return(0,n.default)(t)}},"c/Tr":function(t,a,e){t.exports={default:e("5zde"),__esModule:!0}},"e+iX":function(t,a,e){"use strict";function i(t){e("hg/r")}Object.defineProperty(a,"__esModule",{value:!0});var n=e("pnLg"),s=e("6InC"),o=e("VU/8"),r=i,l=o(n.a,s.a,!1,r,"data-v-045c8a54",null);a.default=l.exports},fBQ2:function(t,a,e){"use strict";var i=e("evD5"),n=e("X8DO");t.exports=function(t,a,e){a in t?i.f(t,a,n(0,e)):t[a]=e}},"hg/r":function(t,a,e){var i=e("Dv2e");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e("rjj0")("0af6a7f8",i,!0)},pnLg:function(t,a,e){"use strict";var i=e("Gu7T"),n=e.n(i),s=e("gyMJ"),o=e("yGXy"),r=e("PJh5"),l=e.n(r);a.a={name:"OrderIndex",mixins:[o.a],data:function(){var t=this;return{loading:!1,actionRadio:"all",stateRadio:"all",infoModal:!1,orderList:{},actionsList:[],actionAndState:{},proposalInfo:null,orderInfo:{},currentPageNum:1,listParams:{name:"",type:"",balanceStatus:"",startTime:"",endTime:"",offset:0,limit:10},columns:[{type:"index",title:"序号",width:70},{key:"code",title:"订单编号"},{key:"phone",title:"用户（ID）"},{key:"proposalName",title:"提案名称（ID）"},{key:"createTime",title:"创建时间",render:function(t,a){return l()(a.row.createTime).format("YYYY-MM-DD HH:mm")}},{key:"ticket",title:"参投票数"},{key:"payTkc",title:"Tkc数"},{key:"orderState",title:"收支"},{key:"orderType",title:"行为"},{key:"id",title:"操作",width:100,render:function(a,e){return a("a",{attrs:{href:"javascript:;"},on:{click:function(){return t.viewInfo(e.row)}}},"查看详情")}}]}},created:function(){this.executeSpin([this.getActionState(),this.getOrderList()])},computed:{formatCreateTime:function(){return l()(this.orderInfo.createTime).format("YYYY-MM-DD HH:mm")}},methods:{getOrderList:function(){var t=this;return"all"!==this.actionRadio?this.listParams.type=this.actionRadio:this.listParams.type="","all"!==this.stateRadio?this.listParams.balanceStatus=this.stateRadio:this.listParams.balanceStatus="",e.i(s.L)(this.listParams).then(function(a){return t.orderList=a.data})},getActionState:function(){var t=this;return e.i(s.M)().then(function(a){t.actionAndState=a.data,t.actionsList=[].concat(n()(a.data.typeList))})},pageChange:function(t,a){a?this.listParams.offset=t-1:this.listParams.limit=t,this.listParams.offset=this.listParams.offset*this.listParams.limit,this.getOrderList()},stateChange:function(){this.resetPage(),this.filterActions(),this.actionRadio="all",this.getOrderList()},actionsChange:function(t){this.resetPage(),this.filterActions(),this.getOrderList()},filterHandle:function(){this.resetPage(),this.getOrderList()},filterActions:function(){var t=this;"1"===this.stateRadio?this.actionsList=this.actionAndState.typeList.filter(function(a){return t.actionAndState.incomeTypeList.includes(a.value)}):"all"===this.stateRadio?this.actionsList=[].concat(n()(this.actionAndState.typeList)):this.actionsList=this.actionAndState.typeList.filter(function(a){return t.actionAndState.expendTypeList.includes(a.value)})},resetPage:function(){this.listParams.offset=0,this.listParams.limit=10,this.currentPageNum=1},viewInfo:function(t){var a=this,i=void 0;this.orderInfo=t,t.type>2?(i={proposalId:t.id,type:t.type,userId:t.userId,code:t.code},e.i(s.N)(i).then(function(t){a.proposalInfo=t.data,a.infoModal=!0})):this.infoModal=!0}}}},qyJz:function(t,a,e){"use strict";var i=e("+ZMJ"),n=e("kM2E"),s=e("sB3e"),o=e("msXi"),r=e("Mhyx"),l=e("QRG4"),c=e("fBQ2"),d=e("3fs2");n(n.S+n.F*!e("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var a,e,n,f,u=s(t),p="function"==typeof this?this:Array,v=arguments.length,h=v>1?arguments[1]:void 0,m=void 0!==h,y=0,_=d(u);if(m&&(h=i(h,v>2?arguments[2]:void 0,2)),void 0==_||p==Array&&r(_))for(a=l(u.length),e=new p(a);a>y;y++)c(e,y,m?h(u[y],y):u[y]);else for(f=_.call(u),e=new p;!(n=f.next()).done;y++)c(e,y,m?o(f,h,[n.value,y],!0):n.value);return e.length=y,e}})},yGXy:function(t,a,e){"use strict";var i=e("//Fk"),n=e.n(i);a.a={methods:{executeSpin:function(t){var a=this;this.$Spin.show(),n.a.all(t).then(function(){return setTimeout(function(){return a.$Spin.hide()},500)}).catch(function(){return a.$Spin.hide()})}}}}});