webpackJsonp([16],{"1lpg":function(t,e,a){"use strict";function n(t){a("2AlJ")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("nlrp"),s=a("kR40"),r=a("VU/8"),o=n,l=r(i.a,s.a,!1,o,"data-v-fc4e285a",null);e.default=l.exports},"2AlJ":function(t,e,a){var n=a("n0CR");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("301eeba6",n,!0)},kR40:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"comment"}},[a("div",{staticClass:"filter-container"},[a("Form",[a("FormItem",[a("div",{staticClass:"filter-header"},[a("div",{staticClass:"date-filter"},[a("span",{staticStyle:{padding:"10px 12px 10px 0"}},[t._v("提交时间：")]),t._v(" "),a("DatePicker",{attrs:{type:"datetime",placeholder:"选择日期",clearable:"",format:"yyyy-MM-dd HH:mm"},on:{"on-change":function(e){t.statePrams.startTime=e}}}),t._v(" "),a("span",[t._v(" 至 ")]),t._v(" "),a("DatePicker",{attrs:{type:"datetime",placeholder:"选择日期",clearable:"",format:"yyyy-MM-dd HH:mm"},on:{"on-change":function(e){t.statePrams.endTime=e}}})],1),t._v(" "),a("div",{staticClass:"search-filter"},[a("Input",{staticStyle:{width:"250px"},attrs:{placeholder:"用户名/评论关键字/提案名称"},model:{value:t.statePrams.name,callback:function(e){t.$set(t.statePrams,"name",e)},expression:"statePrams.name"}}),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.filterHandle}},[t._v("查询")])],1)])]),t._v(" "),a("FormItem",{attrs:{label:"状态：",inline:!0,"label-width":72}},[a("RadioGroup",{attrs:{type:"button"},on:{"on-change":t.filterHandle},model:{value:t.stateRadio,callback:function(e){t.stateRadio=e},expression:"stateRadio"}},[a("Radio",{attrs:{label:"all"}},[t._v("全部")]),t._v(" "),a("Radio",{attrs:{label:"0"}},[t._v("屏蔽")]),t._v(" "),a("Radio",{attrs:{label:"1"}},[t._v("展示")])],1)],1)],1)],1),t._v(" "),a("Table",{attrs:{border:"",stripe:"",columns:t.commentTitle,data:t.commentDataList}}),t._v(" "),a("div",{staticStyle:{"margin-top":"20px","padding-bottom":"200px"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{current:t.currentPageNum,total:t.pageTotal,"show-total":"","show-elevator":"","show-sizer":""},on:{"update:current":function(e){t.currentPageNum=e},"on-change":function(e){return t.pageChange(e,1)},"on-page-size-change":function(e){return t.pageChange(e,0)}}})],1)])],1)},i=[],s={render:n,staticRenderFns:i};e.a=s},n0CR:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"",""])},nlrp:function(t,e,a){"use strict";var n=a("gyMJ");e.a={data:function(){var t=this;return{stateRadio:"all",statePrams:{name:"",status:"",offset:0,limit:10,startTime:"",endTime:""},commentDataList:[],pageTotal:0,currentPageNum:1,commentTitle:[{title:"序号",key:"num",type:"index",width:"80"},{title:"用户名（ID）",key:"proposalTitle",render:function(t,e){return e.row.userBaseDTO.nikeName+"("+e.row.userBaseDTO.mobile+")"}},{title:"提案名称（ID）",key:"proposalTitle",render:function(t,e){return e.row.proposalTitle+"("+e.row.proposalId+")"}},{title:"提交时间",key:"intervalTime"},{title:"评论内容",key:"content",width:"30%",render:function(t,e){return e.row.content.length>50?t("Tooltip",{props:{placement:"top"}},[t("span",{style:{cursor:"pointer"}},e.row.content.slice(0,50)+"。。。"),t("div",{slot:"content",style:{"white-space":"normal"}},e.row.content)]):e.row.content}},{title:"状态",key:"status",width:"80",render:function(t,e){return 1==e.row.status?t("span",{style:{color:"#19be6b"}},"展示"):t("span",{style:{color:"red"}},"屏蔽")}},{title:"操作",key:"edit",width:130,render:function(e,a){return e("div",[e("a",{style:{color:1==a.row.status?"red":"#19be6b",marginRight:"20px"},attrs:{href:"javascript:;"},on:{click:function(){t.updateStatus(a.row)}}},1==a.row.status?"屏蔽":"展示"),e("a",{style:{color:1==a.row.top?"#777777":"#2d8cf0"},attrs:{href:"javascript:;"},on:{click:function(){t.updateTop(a.row)}}},1==a.row.top?"取消置顶":"置顶")])}}]}},created:function(){var t=this;this.$Spin.show(),this.getCommentDataList().then(function(){return setTimeout(function(){return t.$Spin.hide()},500)}).catch(function(){return t.$Spin.hide()})},methods:{updateStatus:function(t){console.log(t),1==t.status?a.i(n.u)({id:t.id}).then(function(e){t.status=0}):a.i(n.v)({id:t.id}).then(function(e){t.status=1})},updateTop:function(t){1==t.top?a.i(n.w)({id:t.id}).then(function(e){return t.top=0}):a.i(n.x)({id:t.id}).then(function(e){return t.top=1})},getCommentDataList:function(){var t=this;return"all"!=this.stateRadio?this.statePrams.status=this.stateRadio:this.statePrams.status="",a.i(n.y)(this.statePrams).then(function(e){t.commentDataList=e.data.rows,t.pageTotal=e.data.total})},filterHandle:function(){this.statePrams.offset=0,this.statePrams.limit=10,this.currentPageNum=1,this.getCommentDataList()},pageChange:function(t,e){e?this.statePrams.offset=t-1:this.statePrams.limit=t,this.statePrams.offset=this.statePrams.offset*this.statePrams.limit,this.getCommentDataList()}}}}});